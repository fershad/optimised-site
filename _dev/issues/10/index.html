<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://rudolph-rebel-rebel.fershad.com">
  <script async src="/js/instant-page.mjs" type="module"></script>
  <script async nomodule="" src="/js/instant-page.js"></script>
  <link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="any">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="manifest" href="/manifest.json">
<link href="/assets/css/main.css" rel="stylesheet" media="print" onload="this.media='all'"></head>

<body>
  <a class="skip-link" href="#main-content">Skip to content</a>

  

  <header>
    <div class="wrapper">
        <div class="logo">
            Optimised
            </a>
            <div>
                <small>A newsletter about website performance and sustainability.</small>
            </div>
        </div>
        <nav>
            <ul>
                
                
                <li>
                    <a href="http://localhost:8080">Archive</a>
                </li>
                
                
                
                <li>
                    <a href="http://localhost:8080/series/">Series</a>
                </li>
                
                
                
                
            </ul>
        </nav>
    </div>
</header>
  <main id="main-content" class="wrapper flow"><h1>Resource hints - Part 2</h1>
<p>This week we continue our look at resource hints, and how you can use them to improve perceived performance. But first ... I mentioned last time that I had started working on a small website for this newsletter. It's now online! Head over to <a href="https://optimised.email">https://optimised.email</a> to check it out.</p>
<p>Besides performance, I've also built this site with sustainability in mind. At the bottom of every page is a small badge that shows the estimated carbon emissions generated by each page. I use that data to calculate the estimated total carbon emissions for the entire website which you can find on the <a href="https://optimised.email/carbon">Carbon page</a>. Why does this matter? Well just think about this - if the internet were a country it would be the 6th largest greenhouse gas emitter.</p>
<p>I'll write more about websites and the environment in a later newsletter. For now, let's wrap up our look at resource hints.</p>
<hr>
<p>Before we continue, let's quickly recap the four resource hints we're looking at.</p>
<ul>
<li><code>dns-prefetch</code> - resolves the IP address for a given domain ahead of time.</li>
<li><code>preconnect</code> - resolves the IP address + opens a TCP/TLS connection for a given domain.</li>
<li><code>preload</code> - instructs that particular resources be downloaded early.</li>
<li><code>prefetch</code> - downloads resources that might be needed for subsequent navigations.</li>
</ul>
<p>We covered <code>dns-prefetch</code> and <code>preconnect</code> <a href="https://optimised.email/issues/issue-9-resource-hints-part-1">last time</a>, so let's get into <code>preload</code> and <code>prefetch</code>.</p>
<h2>Preload</h2>
<p><code>preload</code> is probably the most dangerous of all the resource hints. In fact, it isn't a hint at all. It's more of a command to the browser to download a resource that <em>will</em> be needed on the current page.   This heavy-handedness means that, if used incorrectly, <code>preload</code> has the potential to actually negatively impact page load. Why? Well, the more you prioritise for download with <code>preload</code> the later other (perhaps more important) resources will be downloaded.</p>
<p><strong>What it looks like</strong><br>
Like all other resource hints, you can include <code>preload</code> tags in the HEAD of your document.</p>
<p>You'll notice the <code>as=&quot;image&quot;</code> attribute in the code below. This tells the browser what kind of resource is being fetched, and thus helps it determine priority. You can find a list of all possible values <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-as">on MDN</a>.</p>
<pre><code class="language-html">&lt;link rel=&quot;preload&quot; href=&quot;main-image.webp&quot; as=&quot;image&quot; type=&quot;image/webp&quot; /&gt;
</code></pre>
<p><strong>When to use it</strong><br>
<a href="https://caniuse.com/link-rel-preload">Browser support is pretty good</a> across modern browsers (IE11 won't recognise <code>preload</code> though).</p>
<p><code>preload</code> is best used for bringing forward the download of <em>late discovered resources</em>. These are things like <strong>fonts</strong>, <strong>background images</strong>, or your <strong>app CSS bundle</strong>. All these are normally found by the browser after all the HTML, CSS and/or JavaScript has been parsed, which is often &gt; 1 second into the page load. By using <code>preload</code> for these resources you can have them ready for the browser to load as soon as it discovers them.</p>
<p><strong>Gotchas</strong></p>
<ul>
<li>Just remember - <em>if everything is a priority, then nothing is a priority.</em> Overuse of <code>preload</code> will often lead to a degradation in site performance. It's best used judiciously.</li>
<li>Matt Hobbs has <a href="https://nooshu.github.io/blog/2021/01/23/the-importance-of-font-face-source-order-when-used-with-preload/">a very good write-up</a> on an important gotcha to keep in mind when using <code>preload</code> for fonts.</li>
<li>The <code>crossorigin</code> attribute is required when preloading web fonts, even if they're hosted on your own domain. Just add <code>crossorigin</code> to the end of the preload link tag.</li>
</ul>
<h2>Prefetch</h2>
<p><code>prefetch</code> is handy at helping improve perceived performance for website visitors. It allows you to pre-emptively fetch and cache resources that might be required for future navigations. This is very handy when you know (or can predict) your user's journey.</p>
<p>Think of an online store for example. Your analytics tell you that most visitors that go to a products listing page click through to a product details page (which all use the same CSS file for styling). Using <code>prefetch</code> <strong>on the product listing page,</strong> you can have the browser download and cache the CSS file for the product details page. Once a user navigates there the CSS is ready to go. This can significantly speed up the rendering time for the page.</p>
<p><strong>What it looks like</strong><br>
As with all other resource hints, you can include <code>prefetch</code> in the HEAD of your HTML.</p>
<pre><code class="language-html">&lt;link rel=&quot;prefetch&quot; href=&quot;/css/product.css&quot; /&gt;
</code></pre>
<p><strong>When to use it</strong><br>
<code>prefetch</code> is best used when you are almost certain of a user's intended action. Since it downloads resources with a low priority it won't block the current page. However, prefetching too many resources (especially if they aren't used) will eat up your visitors bandwidth for no real gain.</p>
<p><strong>Gotchas</strong></p>
<ul>
<li><code>prefetch</code> downloads &amp; caches files. It does not execute them.</li>
<li>If you need to support IE9, note that it treats <code>prefetch</code> like <code>dns-prefetch</code>. Go figure ü§∑üèæ‚Äç‚ôÇÔ∏è.</li>
</ul>
<h2>Resources</h2>
<ul>
<li><strong><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Preloading_content">Preloading content with rel=&quot;preload&quot;</a></strong> - A thorough guide to <code>preload</code> from the MDN team.</li>
<li><strong><a href="https://nooshu.github.io/blog/2021/01/23/the-importance-of-font-face-source-order-when-used-with-preload/">The importance of <code>@font-face</code> source order when used with preload</a></strong> - Matt Hobbs shows us how a small change in the ordering of your font sources in the <code>@font-face</code> rule can have a big impact on data and web performance.</li>
<li><strong><a href="https://blog.mgechev.com/2021/02/07/prefetching-strategies-heuristics-faster-web-apps/">Prefetching Heuristics</a></strong> - Minko Gechev delivers this really nice little rundown of different prefetching patterns.</li>
</ul>
<h2>Articles</h2>
<p><strong><a href="https://www.cloudflare.com/en-au/learning/performance/more/website-performance-conversion-rates/">How Website Performance Affects Conversion Rates</a></strong><br>
The team at Cloudflare presents data on just how much page speed impacts on user behaviour, and in turn how much revenue a website can generate.</p>
<hr>
<p>The next issue of Optimised will be in your inbox on March 5th. In the meantime, visit the website &amp; let me know what you think! I'd really appreciate it with a friend too.</p>
<p>As always if you've got any feedback or specific topics you want to be covered then just reply to this email.</p>
<p>Keep safe, stay well.<br>
Fershad.</p>
</main>
  <footer class="footer">
    <div class="wrapper text-center flow">
        <div id="wcb-wrapper"></div>
        <nav>
            <ul>
                
                    <li>
                        <a href="http://localhost:8080">Archive</a>
                    </li>
                
                    <li>
                        <a href="http://localhost:8080/series/">Series</a>
                    </li>
                
                    <li>
                        <a href="http://localhost:8080/contact/">Contact</a>
                    </li>
                
            </ul>
        </nav>
        <div class="text-center">
            <p>Copyright 2022 Fershad Digital
            </p>
            <small>Fershad Digital LTD is a company registered in Taiwan.
                <br>Unified business number: 82954243
                <br>
                <a href="http://localhost:8080/privacy">Privacy policy</a>
            </small>
        </div>
    </div>
</footer>

<!-- <script async src="/js/carbon-badge.mjs" type="module"></script>
<script async nomodule="" src="/js/carbon-badge.js"></script> -->


  <svg class="svg-filters" style="display:none;" version="1.1" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <filter id="marker-shape">
        <feTurbulence basefrequency="0 0.15" numoctaves="1" result="warp" type="fractalNoise" />
        <feDisplacementMap in2="warp" ein="SourceGraphic" scale="30" xchannelselector="R" ychannelselector="G" />
      </filter>
    </defs>
    <rect width="100%" height="100%" filter="url(#marker-shape)" />
  </svg>

  <script async src="/prism/prism.js"></script>
  <link href="/assets/css/tokens.css" rel="stylesheet">

  
</body>

</html>