<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://rudolph-rebel-rebel.fershad.com">
  <script async src="/js/instant-page.mjs" type="module"></script>
  <script async nomodule="" src="/js/instant-page.js"></script>
  <link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="any">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="manifest" href="/manifest.json">
<link href="/assets/css/main.css" rel="stylesheet" media="print" onload="this.media='all'"></head>

<body>
  <a class="skip-link" href="#main-content">Skip to content</a>

  

  <header>
    <div class="wrapper">
        <div class="logo">
            Optimised
            </a>
            <div>
                <small>A newsletter about website performance and sustainability.</small>
            </div>
        </div>
        <nav>
            <ul>
                
                
                <li>
                    <a href="http://localhost:8080">Archive</a>
                </li>
                
                
                
                <li>
                    <a href="http://localhost:8080/series/">Series</a>
                </li>
                
                
                
                
            </ul>
        </nav>
    </div>
</header>
  <main id="main-content" class="wrapper flow"><h1>Resource hints - Part 1</h1>
<p>This week I started working on a new website for this newsletter. It's not completely ready yet, but by the time the next issue is out, it should be online. For the time being, it is just going to be an archive, but I might expand it out to include my own blog posts &amp; articles later on.</p>
<p>This week's issue will be the first in another two-parter all about resource hints.</p>
<hr>
<p>As you might be able to guess by the name, resource hints allow developers to indicate to the browser that particular network connections or files might be important for the current (or future) page.</p>
<p>They come in the form of a single line of HTML code that you place within the HEAD of your page. They may be small, but they have the potential to improve site performance immensely. That said, if overused they can also degrade performance. I'm going to focus on the four <a href="https://almanac.httparchive.org/en/2020/resource-hints#hints-adoption">most commonly used resource hints</a> - <code>dns-prefetch</code>, <code>preconnect</code>, <code>preload</code>, and <code>prefetch</code>.</p>
<ul>
<li><code>dns-prefetch</code> - resolves the IP address for a given domain ahead of time.</li>
<li><code>preconnect</code> - resolves the IP address + opens a TCP/TLS connection for a given domain.</li>
<li><code>preload</code> - instructs that particular resources be downloaded early.</li>
<li><code>prefetch</code> - downloads resources that might be needed for subsequent navigations.</li>
</ul>
<p>These definitions might not mean much now, but once you understand how each of these can be used they'll serve as a quick refresher if you ever need it.</p>
<p>We'll cover <code>dns-prefetch</code> and <code>preconnect</code> this week, and <code>preload</code> and <code>prefetch</code> in the next issue.</p>
<h3>DNS-Prefetch</h3>
<p><code>dns-prefetch</code> is handy if you're using third-party resources on your site. For example, if you're hosting your images on Cloudinary, using Fathom for your website analytics, and you've got a YouTube embed on the page. Connecting to each of these providers starts with IP resolution for their domain. This operation can between 80 - 300ms (sometimes longer) for each domain. Normally this would happen when the browser first comes across a resource from an external domain. However, using <code>dns-prefetch</code> you can tell the browser that it would be a good idea to start this process early. By doing this the IP resolution step will be (most likely) complete by the time the browser first comes across an external resource from that domain.</p>
<p><strong>What it looks like</strong><br>
Using YouTube as an example, you'd include this line early on in the HEAD of your page</p>
<pre><code class="language-html">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;https://www.youtube.com&quot;&gt;
</code></pre>
<p><strong>When to use it</strong></p>
<ul>
<li>If you're using resources hosted on an external domain, and especially if you're using multiple resources from one domain on the same page (e.g. a page with multiple images hosted on Cloudinary).</li>
<li><code>dns-prefetch</code> has <a href="https://caniuse.com/link-rel-dns-prefetch">browser support</a> all the way back to IE10, so it's useful if you're having to support legacy browsers.</li>
</ul>
<p><strong>Gotchas</strong></p>
<ul>
<li>Google Chrome has a <em>limit of 6</em> in-flight DNS requests, so be judicious in which domains you use <code>dns-prefetch</code> for. Prioritise domains that host important resources for your site's Largest Contentful Paint (LCP).</li>
</ul>
<h3>Preconnect</h3>
<p><code>preconnect</code> gives you the same IP resolution as <code>dns-prefetch</code> but goes a step further by 'warming up' the connection as well. What this means is that on top of resolving the IP of the domain, <code>preconnect</code> also prompts the browser to establish a TCP/TLS connection with the domain. This means that when a browser first comes across an external resource it can simply start downloading it, rather than first having to establish a connection. There's a saving of somewhere in the range of 100ms here for each domain, though it does vary.</p>
<p><strong>What it looks like</strong><br>
Sticking with the YouTube example above, you can including this line early in the HEAD of your page.</p>
<pre><code class="language-html">&lt;link rel=&quot;preconnect&quot; href=&quot;https://www.youtube.com&quot;&gt;
</code></pre>
<p><strong>When to use it</strong><br>
Same as <code>dns-prefetch</code> though <a href="https://caniuse.com/link-rel-preconnect">browser support</a> is not as broad (IE &amp; Firefox don't support <code>preconnect</code>). That said, you can use <code>preconnect</code> with <code>dns-prefetch</code> as a fallback by just putting them one after another in your code.</p>
<pre><code class="language-html">&lt;link rel=&quot;preconnect&quot; href=&quot;https://www.youtube.com&quot;&gt;
&lt;link rel=&quot;dns-prefetch&quot; href=&quot;https://www.youtube.com&quot;&gt;
</code></pre>
<p><strong>Gotchas</strong></p>
<ul>
<li><code>preconnect</code> is best used only for resources early in the page load. This is because the browser will close the connection after 10 seconds if it's unused.</li>
<li>Using <code>preconnect</code> can put load on device CPU so try to limit requests (common practice is 3, no more than 6).</li>
</ul>
<h2>Resources</h2>
<ul>
<li><strong><a href="https://web.dev/preconnect-and-dns-prefetch/">Establish network connections early to improve perceived page speed</a></strong> - This web.dev post is a general introduction to <code>dns-prefetch</code> and <code>preconnect</code> resource hints.</li>
<li><strong><a href="https://almanac.httparchive.org/en/2020/resource-hints">The Web Almanac 2020 - Resource Hints</a></strong> - The 2020 Web Almanac chapter on resource hints gives an insight into the adoption and usage of resource hints across the internet.</li>
</ul>
<h2>Articles</h2>
<p><strong><a href="https://shkspr.mobi/blog/2021/01/the-unreasonable-effectiveness-of-simple-html/">The unreasonable effectiveness of simple HTML</a></strong><br>
Terence Eden gives us a reminder that not all visitors to our websites will be on the latest smartphone or laptop. This post is a short read and a reminder of how important it can be to keep websites accessible.</p>
<p><strong><a href="https://www.bbc.co.uk/blogs/internet/entries/8673fe2a-e876-45fc-9a5f-203c049c9f9c">Moving BBC Online to the cloud</a></strong><br>
The first in a multi-part series from the BBC's Design &amp; Engineering team that details how they modernised and simplified, the delivery of the BBC's huge online presence.</p>
<hr>
<p>The next issue of Optimised will be in your inbox on February 19th (with a new website to boot!). In the meantime, I'd really appreciate it if you could share this email with a friend. As always if you've got any feedback or specific topics you want to be covered then just reply to this email.</p>
<p>Keep safe, stay well.<br>
Fershad.</p>
</main>
  <footer class="footer">
    <div class="wrapper text-center flow">
        <div id="wcb-wrapper"></div>
        <nav>
            <ul>
                
                    <li>
                        <a href="http://localhost:8080">Archive</a>
                    </li>
                
                    <li>
                        <a href="http://localhost:8080/series/">Series</a>
                    </li>
                
                    <li>
                        <a href="http://localhost:8080/contact/">Contact</a>
                    </li>
                
            </ul>
        </nav>
        <div class="text-center">
            <p>Copyright 2022 Fershad Digital
            </p>
            <small>Fershad Digital LTD is a company registered in Taiwan.
                <br>Unified business number: 82954243
                <br>
                <a href="http://localhost:8080/privacy">Privacy policy</a>
            </small>
        </div>
    </div>
</footer>

<!-- <script async src="/js/carbon-badge.mjs" type="module"></script>
<script async nomodule="" src="/js/carbon-badge.js"></script> -->


  <svg class="svg-filters" style="display:none;" version="1.1" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <filter id="marker-shape">
        <feTurbulence basefrequency="0 0.15" numoctaves="1" result="warp" type="fractalNoise" />
        <feDisplacementMap in2="warp" ein="SourceGraphic" scale="30" xchannelselector="R" ychannelselector="G" />
      </filter>
    </defs>
    <rect width="100%" height="100%" filter="url(#marker-shape)" />
  </svg>

  <script async src="/prism/prism.js"></script>
  <link href="/assets/css/tokens.css" rel="stylesheet">

  
</body>

</html>